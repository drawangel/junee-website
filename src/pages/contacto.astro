---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Contacto - Junee AI" description="Contacta con Junee AI para transformar tu catálogo de e-commerce">
  <main class="flex-grow">
    <div class="container mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-16 sm:py-24">
      <div class="grid grid-cols-1 gap-12 lg:grid-cols-2 lg:gap-16">
        <!-- Left Column: Heading & Text -->
        <div class="flex flex-col justify-center">
          <div class="flex flex-col gap-4">
            <h1 class="text-4xl font-black leading-tight tracking-tighter text-gray-900 dark:text-white sm:text-5xl lg:text-6xl">
              Empecemos por tu catálogo
            </h1>
            <p class="text-gray-600 dark:text-gray-400 text-lg font-normal leading-normal">
              Déjanos conocer tus retos. Te mostraremos cómo Junee puede ayudarte.
            </p>
          </div>
        </div>

        <!-- Right Column: Form -->
        <div class="w-full">
          <div class="rounded-xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 p-6 sm:p-8 shadow-sm">
            <form action="https://api.web3forms.com/submit" method="POST" class="space-y-6">
              <!-- Web3Forms Access Key - Replace with your own from https://web3forms.com -->
              <input type="hidden" name="access_key" value="YOUR_ACCESS_KEY_HERE" />
              <input type="hidden" name="subject" value="Nuevo contacto desde Junee AI" />
              <input type="hidden" name="from_name" value="Junee AI Website" />

              <!-- Nombre -->
              <div>
                <label class="flex flex-col">
                  <p class="text-sm font-medium text-gray-900 dark:text-white leading-normal pb-2">Nombre</p>
                  <input
                    class="flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded text-gray-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border-2 border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 focus:border-primary h-14 placeholder:text-gray-400 px-4 text-base font-normal leading-normal transition-colors"
                    name="name"
                    placeholder="Tu nombre completo"
                    required
                    type="text"
                  />
                </label>
              </div>

              <!-- Empresa -->
              <div>
                <label class="flex flex-col">
                  <p class="text-sm font-medium text-gray-900 dark:text-white leading-normal pb-2">Empresa</p>
                  <input
                    class="flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded text-gray-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border-2 border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 focus:border-primary h-14 placeholder:text-gray-400 px-4 text-base font-normal leading-normal transition-colors"
                    name="company"
                    placeholder="Nombre de tu empresa"
                    required
                    type="text"
                  />
                </label>
              </div>

              <!-- Email -->
              <div>
                <label class="flex flex-col">
                  <p class="text-sm font-medium text-gray-900 dark:text-white leading-normal pb-2">Email corporativo</p>
                  <input
                    class="flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded text-gray-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border-2 border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 focus:border-primary h-14 placeholder:text-gray-400 px-4 text-base font-normal leading-normal transition-colors"
                    name="email"
                    placeholder="nombre@empresa.com"
                    required
                    type="email"
                  />
                </label>
              </div>

              <!-- Sector -->
              <div>
                <label class="flex flex-col">
                  <p class="text-sm font-medium text-gray-900 dark:text-white leading-normal pb-2">Sector</p>
                  <div class="relative">
                    <select
                      class="flex w-full min-w-0 flex-1 appearance-none overflow-hidden rounded text-gray-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border-2 border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 focus:border-primary h-14 px-4 pr-10 text-base font-normal leading-normal transition-colors cursor-pointer"
                      name="sector"
                      required
                    >
                      <option disabled selected value="">Selecciona tu sector</option>
                      <option value="moda">Moda</option>
                      <option value="electronica">Electrónica</option>
                      <option value="hogar">Hogar y Jardín</option>
                      <option value="belleza">Belleza y Cuidado Personal</option>
                      <option value="alimentacion">Alimentación y Bebidas</option>
                      <option value="otros">Otros</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 dark:text-gray-400">
                      <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                    </div>
                  </div>
                </label>
              </div>

              <!-- SKUs -->
              <div>
                <label class="flex flex-col">
                  <p class="text-sm font-medium text-gray-900 dark:text-white leading-normal pb-2">Número de SKUs que gestionas al mes</p>
                  <input
                    class="flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded text-gray-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border-2 border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 focus:border-primary h-14 placeholder:text-gray-400 px-4 text-base font-normal leading-normal transition-colors"
                    min="0"
                    name="skus"
                    placeholder="Ej: 5000"
                    required
                    type="number"
                  />
                </label>
              </div>

              <!-- Submit Button -->
              <div>
                <button
                  class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-primary text-white text-base font-bold leading-normal tracking-wide hover:opacity-90 transition-opacity mt-2"
                  type="submit"
                >
                  <span class="truncate">Solicitar diagnóstico gratuito</span>
                </button>
              </div>

              <!-- Subtext -->
              <p class="text-center text-sm text-gray-500 dark:text-gray-400">Junee analiza. Tú decides.</p>
            </form>
          </div>
        </div>
      </div>
    </div>
  </main>
</Layout>

<script>
  // Form submission handler
  const form = document.querySelector('form');
  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const button = form.querySelector('button[type="submit"]');
      const originalText = button?.querySelector('span')?.textContent;

      if (button) {
        button.disabled = true;
        const span = button.querySelector('span');
        if (span) span.textContent = 'Enviando...';
      }

      try {
        const response = await fetch('https://api.web3forms.com/submit', {
          method: 'POST',
          body: formData
        });

        if (response.ok) {
          if (button) {
            const span = button.querySelector('span');
            if (span) span.textContent = '¡Enviado! Te contactaremos pronto.';
          }
          form.reset();
          setTimeout(() => {
            if (button) {
              button.disabled = false;
              const span = button.querySelector('span');
              if (span && originalText) span.textContent = originalText;
            }
          }, 3000);
        } else {
          throw new Error('Error en el envío');
        }
      } catch (error) {
        if (button) {
          button.disabled = false;
          const span = button.querySelector('span');
          if (span && originalText) span.textContent = originalText;
        }
        alert('Hubo un error al enviar el formulario. Por favor, intenta de nuevo.');
      }
    });
  }
</script>
